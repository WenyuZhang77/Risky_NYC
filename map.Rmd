---
title: "map"
author: "Yiming Li"
date: "11/25/2021"
output: html_document
---

```{r}
library(tidyverse)
library(ggmap)
library(ggplot2)
library(ggthemes)
library(forcats)
library(plotly)
library(leaflet)
```

```{r}
NYPD_2020 = read.csv("../final data/2020data.csv") %>% 
  janitor::clean_names() 
```

```{r}
NYPD_2020 = NYPD_2020 %>% 
  filter(name_of_borough != "") 

leaflet(NYPD_2020) %>% 
  addProviderTiles(providers$CartoDB.Positron) %>% 
  setView(lng = -73.935242, lat = 40.730610, zoom = 10) %>% 
  addMarkers(clusterOptions = markerClusterOptions())

```


```{r}
NYPD_2020  %>% 
  filter(name_of_borough != "") %>% 
  mutate(text_label = str_c("borough:", name_of_borough)) %>% 
  plot_ly()  %>% 
    add_markers(
    y = ~ latitude,
    x = ~ longitude,
    text = ~ text_label,
    alpha = 0.02,
    frame = ~ month,
    mode = "marker",
    color = ~ name_of_borough,
  ) %>%
  animation_opts(transition = 1,frame = 12)
```

